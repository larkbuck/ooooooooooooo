<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>o0o</title>
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <script src="https://cdn.rawgit.com/matthewbryancurtis/aframe-star-system-component/db4f1030/index.js"></script>


  <!-- trying to import 3js objects + libs... -->
  <script type="" src="threeComponents.js" type="text/javascript"></script>
  <script type="module" src="stats.js" type="text/javascript"></script>

  <script type="" src="water.js" type="text/javascript"></script>

  <!--- code for mobile users --->
  <script src="tap-to-teleport.js" type="text/javascript"></script>
  <script src="https://rawgit.com/fernandojsg/aframe-teleport-controls/master/dist/aframe-teleport-controls.min.js"></script>
</head>

<script>
  AFRAME.registerComponent('mythreejsthing', {
    schema: {
      bar: {
        type: 'number'
      }, // To declare your own attribute that can be customized when entity created
      color: {
        default: '#bbbfff'
      },
    },

    init: function() {
      // Do something when component first attached.
    },

    update: function() {
      var material = new THREE.MeshPhongMaterial({
        color: this.data.color,
        wireframe: false,
        shininess: 150,
        specular: 0xffffff
      });

      // const radius = 1;
      // const geometry = new THREE.DodecahedronBufferGeometry(radius);


      // var geometry = new THREE.BoxGeometry(2, 2, 2);

      const radius = 7;

      const geometry = new THREE.OctahedronBufferGeometry(radius);





      this.el.setObject3D('mesh', new THREE.Mesh(geometry, material));
    },

    tick: function(time, timeDelta) {
      // Do something on every scene tick or frame.
    },

    remove: function() {
      this.el.removeObject3D('mesh');
    }
  });



  // media query event handler - use this to load mobile v. broswer HTML
  {
    if (matchMedia) {
      const mq = window.matchMedia("(min-width: 500px) and (min-height: 500px)");
      mq.addListener(widthChange);
      widthChange(mq);
    }

    function widthChange(mq) {
      if (mq.matches) { // matches browser
        // window width is at least 500px
        // document.querySelector("#camera").innerHTML = `Sorry phone, to make a Traumagotchi you have to be on a computer.`;
        console.log('browser');

      } else { // matches mobile
        // document.querySelector("#camera").innerHTML = `Sorry phone, to make a Traumagotchi you have to be on a computer.`;
        console.log('momo');
      }
    }
  }
</script>


<body>
  <a-scene>


    <a-assets>
      <img id="texture" src="marble.png">
      <img id="texturestand" src="marble3.jpg">
      <img id="water-normal" src="waternormals.jpg" />
      <img id="milky-way" src="nasa-milkyWay.jpg" />
      <img id="moon-texture" src="moon-texture.jpg" />
      <img id="starry-night" src="starryNight-eq.jpg" />

    </a-assets>



    <a-entity mythreejsthing=""  position="50 45 -150" rotation="33 0 25" animation="property: rotation; to: -327 360 25; loop: true; dur: 10000; easing: easeInOutQuad;"> </a-entity>

    <a-entity mythreejsthing="color: #bbff33;" position="20 66 -140" rotation="33 0 25" scale=".5 .5 .5" animation="property: rotation; to: -327 360 25; loop: true; dur: 10000; easing: easeInOutQuad;"> </a-entity>

    <a-entity mythreejsthing="color: #906edb;" position="-10 70 -120" scale=".8 .8 .8" rotation="33 0 25" animation="property: rotation; to: -327 360 25; loop: true; dur: 11000; easing: easeInOutQuad;"> </a-entity>

    <a-entity mythreejsthing="color: #518fe0;" position="-20 50 -133"  scale="1 .5 .5" rotation="33 0 25" animation="property: rotation; to: -327 360 25; loop: true; dur: 9000; easing: easeInOutQuad;"> </a-entity>

    <!-- <a-sky src="#starry-night" theta-length="90" radius="5000"></a-sky> -->
    <a-sky color="#010001"></a-sky>
    <a-entity star-system="count: 100; radius: 250; depth: 80; color: #b68fff;"></a-entity>

    <a-cylinder  src="#moon-texture" radius="20" height="2" position="0 -2 0"></a-cylinder>

    <!-- <a-cylinder  src="#moon-texture" radius="200" height="2" position="0 5 0"></a-cylinder> -->

    <a-cylinder  id="ground" src="#moon-texture" radius="2000" height="2" position="0 -2 0"></a-cylinder>


    <a-moon material="normalMap: #moon-texture; sphericalEnvMap: #milky-way;" position="0 -2 0"></a-moon>


    <a-ocean-plane material="normalMap: #water-normal; sphericalEnvMap: #milky-way;" position="0 .5 0"></a-ocean-plane>

    <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9" shadow="cast: true"></a-box>
    <a-sphere position="0 -1.25 -5" radius="1.85" color="#EF2D5E" shadow="receive: true"></a-sphere>
    <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>

    <!-- J A S O N S R O O M -->
    <!--- obsidian 3D stand --->
    <!-- <a-box src="#texturestand" depth="0.5" height="25" width="23" position="-33 0 17" rotation="-90 0 90" shadow="cast: true"></a-box> -->

    <!--- ultra 3D stand --->
    <!-- <a-box src="#texturestand" depth="0.5" height="20" width="23" position="34 0 19" rotation="-90 0 90" shadow="receive: true"></a-box> -->

    <!--- eternal 3D stand --->
    <!-- <a-box src="#texturestand" repeat="2 2" depth="0.5" height="20" width="23" position="9 0 -15" rotation="-90  0" normal-map="#marble-nrm" normal-texture-repeat="1 1" normal-scale="1 1" shadow="cast: true"></a-box> -->

    <!--- floor --->
    <!-- <a-box src="#texturestand" repeat="4 4" normal-map="#marble-nrm" normal-texture-repeat="1 1" normal-scale="1 1" color="grey" depth="0.5" height="110" width="70" position="0 -.5 4" rotation="-90 0 90" shadow="receive: true"></a-box> -->

    <!-- <a-box src="#texturestand" normal-map="#marble-nrm" normal-texture-repeat="1 1" normal-scale="1 1" color="grey" depth="0.5" height="15" width="25" position="0 -.5 51.5" rotation="-90 0 90" shadow="receive: true"></a-box> -->


    <!--- walls --->
    <!-- <a-box src="#texturestand" normal-map="#marble-nrm" normal-texture-repeat="1 1" normal-scale="1 1" depth="0.5" height="15" width="25" position="-7.7 7 51.5" rotation="0 90 0" shadow="receive: true"></a-box>

    <a-box src="#texturestand" normal-map="#marble-nrm" normal-texture-repeat="1 1" normal-scale="1 1" depth="0.5" height="15" width="25" position="7.7 7 51.5" rotation="0 90 0" shadow="receive: true"></a-box>

    <a-box src="#texturestand" repeat="1 1" normal-map="#marble-nrm" normal-texture-repeat="1 1" normal-scale="1 1" depth="0.5" height="15" width="15" position="0 7 64" rotation="0 0 0" shadow="receive: true"></a-box>

    <a-box src="#texturestand" repeat="1 1" normal-map="#marble-nrm" normal-texture-repeat="1 1" normal-scale="1 1" depth="0.5" height="110" width="30" position="0 14 -30.5" rotation="0 0 90" shadow="receive: true"></a-box>

    <a-box src="#texturestand" normal-map="#marble-nrm" normal-texture-repeat="1 1" normal-scale="1 1" depth="0.5" height="70" width="30" position="55.218 14 4.025" rotation="0 90 90" shadow="receive: true"></a-box>

    <a-box src="#texturestand" normal-map="#marble-nrm" normal-texture-repeat="1 1" normal-scale="1 1" depth="0.5" height="49" width="30" position="31.933 14 39.196" rotation="0 0 90" shadow="receive: true"></a-box>

    <a-box src="#texturestand" normal-map="#marble-nrm" normal-texture-repeat="1 1" normal-scale="1 1" depth="0.5" height="49" width="30" position="-31.876 14 39.196" rotation="0 0 90" shadow="receive: true"></a-box>

    <a-box src="#texturestand" normal-map="#marble-nrm" normal-texture-repeat="1 1" normal-scale="1 1" depth="0.5" height="70" width="30" position="-55.218 14 4.025" rotation="0 90 90" shadow="receive: true"></a-box>

    <a-box src="#texturestand" normal-map="#marble-nrm" normal-texture-repeat="1 1" normal-scale="1 1" depth="0.5" height="15" width="25" position="0 22 39.196" rotation="0 0 90" shadow="receive: true"></a-box> -->

    <!--- ceiling --->
    <!-- <a-box src="#texturestand" normal-map="#marble-nrm" normal-texture-repeat="1 1" normal-scale="1 1" color="grey" depth="0.5" height="26" width="15" position="0 14.5 52" rotation="90 0 0" shadow="receive: true"></a-box>

    <a-box src="#texturestand" normal-map="#marble-nrm" normal-texture-repeat="1 1" normal-scale="1 1" color="grey" depth="0.5" height="110" width="70" position="0 29 4" rotation="-90 0 90" shadow="receive: true"></a-box> -->



    <!--- rock test  --->
    <a-assets>
      <a-asset-item id="rock" src="untitled.gltf"></a-asset-item>
    </a-assets>

    <a-entity gltf-model="#rock" animation-mixer="clip:" position="0 0 0" rotation="0 -90 0" scale=".1 1 1" shadow="cast: true" id="rock"></a-entity>


    <!--- 3D wall text for controls  --->
    <a-assets>
      <a-asset-item id="cont" src="mobile_controls.gltf"></a-asset-item>
    </a-assets>

    <a-entity gltf-model="#cont" animation-mixer="clip:" position="7.45 5 48" rotation="0 -90 0" scale=".5 .5 2" shadow="cast: true" id="parallax"></a-entity>


    <!-- L I G H T S -->
    <!--- light source for scene --->
    <a-entity light="type: ambient; intensity: 0.2">
    </a-entity>

    <a-entity light="type: directional; castShadow: true; intensity: 0.8; shadowCameraVisible: false;" position="-5 3 1.5"></a-entity>

    <!-- <a-light type="directional" position="0 0 0" rotation="-90 0 0" color="#ca7272" castShadow="true" target="#directionaltarget">
      <a-entity id="directionaltarget" position=".5 .5 -1"></a-entity>
    </a-light> -->

    <!--- light source for description and control --->
    <!-- <a-entity data-brackets-id="2258" light="type: point;
                         distance: 15;
                         castShadow:
                         true;
                         color: #7e7ab3" position="-4.82562 6.90639 47.55674" id="p_light">
    </a-entity>

    <a-entity data-brackets-id="2259" light="type: point;
                         distance: 15;
                         castShadow: true;
                         color: #944c4c" position="6.04314 6.72045 47.30599" id="p_light 2">
    </a-entity> -->


    <!-- C A M E R A -->

    <!-- desktop camera / controls -->
    <!-- <a-entity camera look-controls wasd-controls="acceleration:300" position="0 2 10"></a-entity> -->


    <!-- mobile camera / controls-->
    <a-entity id="cameraRig" position="0 2 10">
      <a-entity id="head" position="0 0 0" camera="userHeight:3" look-controls="pointerLockEnabled:true">
        <a-entity position="0.1 -0.1 0" touch-listener teleport-controls="cameraRig: #cameraRig;
             teleportOrigin: #head;
             startEvents:starttouch;
             endEvents:endtouch;
             curveShootingSpeed:20;
             hitCylinderRadius:1;
             collisionEntities: #ground">
        </a-entity>
      </a-entity>
    </a-entity>
  </a-scene>



</body>

</html>
